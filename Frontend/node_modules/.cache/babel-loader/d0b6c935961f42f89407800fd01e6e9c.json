{"ast":null,"code":"var _jsxFileName = \"/Users/anaghasethuraman/Desktop/CMPE273-UberEats-Lab3/Frontend/src/components/Dashboard/AddToCart.js\";\nimport Button from '@restart/ui/esm/Button';\nimport React, { Component } from 'react';\nimport { Modal, Form, Row, Col } from 'react-bootstrap';\nimport axios from 'axios';\nimport backendServer from \"../../webConfig\";\nimport { TiDelete } from 'react-icons/ti';\nimport ReactTooltip from 'react-tooltip';\n\nclass AddToCart extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChange = (e, dishid, dishprice) => {\n      e.preventDefault();\n      const {\n        dishes\n      } = this.state;\n      const index = dishes.findIndex(dish => dish._id === dishid);\n      const orders = [...dishes];\n      orders[index].quantity = e.target.value;\n      orders[index].quantityprice = (dishprice * e.target.value).toFixed(2);\n      this.setState({\n        dishes: orders\n      });\n    };\n\n    this.updatestatusfn = (e, dishid, quantity, dishprice) => {\n      e.preventDefault();\n      const quantitydata = {\n        _id: dishid,\n        quantity: quantity,\n        quantityprice: (quantity * dishprice).toFixed(2)\n      };\n      this.updateDishQuantity(quantitydata);\n    };\n\n    this.addquantityfn = (e, dishid) => {\n      e.preventDefault();\n      const {\n        dishes\n      } = this.state;\n      const index = dishes.findIndex(dish => dish._id === dishid);\n      const orders = [...dishes];\n      const {\n        quantity\n      } = orders[index];\n      const {\n        dishprice\n      } = orders[index];\n      const amount = parseFloat(dishprice, 10);\n      orders[index].quantity = quantity + 1;\n      orders[index].quantityprice = (amount * (quantity + 1)).toFixed(2);\n      this.setState({\n        dishes: orders\n      });\n      const quantitydata = {\n        _id: dishid,\n        quantity: orders[index].quantity,\n        quantityprice: orders[index].quantityprice\n      };\n      this.updateDishQuantity(quantitydata);\n    };\n\n    this.subquantityfn = (e, dishid) => {\n      e.preventDefault();\n      const {\n        dishes\n      } = this.state;\n      const index = dishes.findIndex(dish => dish._id === dishid);\n      const orders = [...dishes];\n      const {\n        quantity\n      } = orders[index];\n      const {\n        dishprice\n      } = orders[index];\n      const amount = parseFloat(dishprice, 10);\n\n      if (orders[index].quantity > 1) {\n        orders[index].quantity = quantity - 1;\n        orders[index].quantityprice = (amount * (quantity - 1)).toFixed(2);\n      }\n\n      this.setState({\n        dishes: orders\n      });\n      const quantitydata = {\n        _id: dishid,\n        quantity: orders[index].quantity,\n        quantityprice: orders[index].quantityprice\n      };\n      this.updateDishQuantity(quantitydata);\n    };\n\n    this.deletequantityfn = (e, dishid) => {\n      e.preventDefault();\n      const {\n        dishes\n      } = this.state;\n      const index = dishes.findIndex(dish => dish._id === dishid);\n      const orders = [...dishes];\n      console.log(orders.splice(index, 1));\n\n      if (orders.length === 0) {\n        this.setState({\n          status: \"empty\"\n        });\n      } // \n\n\n      this.setState({\n        dishes: orders\n      });\n      const quantitydata = {\n        _id: dishid,\n        quantity: 0,\n        quantityprice: 0\n      };\n      this.updateDishQuantity(quantitydata);\n    };\n\n    this.updateDishQuantity = quantitydata => {\n      console.log(quantitydata); //axios.defaults.headers.common[\"authorization\"] = localStorage.getItem(\n      //  \"token\");\n\n      axios.post(`${backendServer}/updatedishquantity`, quantitydata).then(res => {\n        console.log(\"Order type updated\");\n      });\n    };\n\n    this.state = {\n      show: false,\n      customerid: localStorage.getItem(\"userid\"),\n      restaurantid: localStorage.getItem(\"restid\"),\n      dishes: [],\n      dishprice: null,\n      dishname: null,\n      status: null\n    }; //this.handleCheckout = this.handleCheckout.bind(this);\n  }\n\n  componentDidMount() {\n    this.setState({\n      show: !this.state.show\n    });\n    this.setState({\n      dishes: []\n    });\n    const data = {\n      customerid: this.state.customerid //restaurantid: this.state.restaurantid\n\n    }; // console.log(\"***\")\n    // console.log(data)\n    // console.log(\"***\")\n\n    axios.post(`${backendServer}/getcartitem`, data).then(response => {\n      //console.log(response.data[0].deliverytype);\n      localStorage.setItem(\"deliverytype\", response.data[0].deliverytype);\n\n      if (response.data.length > 0) {\n        this.setState({\n          status: \"datapresent\"\n        });\n      } else {\n        this.setState({\n          status: \"nodata\"\n        });\n      }\n\n      this.setState({\n        dishes: this.state.dishes.concat(response.data)\n      });\n    });\n  }\n\n  render() {\n    const {\n      viewCart,\n      closeModal,\n      handleSubmit\n    } = this.props;\n    var aftercart = null;\n    var beforecart = null;\n    let updateitems = null;\n\n    if (this.state.status === \"datapresent\") {\n      aftercart = /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Form, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        className: \"carttable\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 21\n        }\n      }, \"Item\"), /*#__PURE__*/React.createElement(Col, {\n        className: \"carttable\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 21\n        }\n      }, \"Price\"), /*#__PURE__*/React.createElement(Col, {\n        className: \"carttable\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 21\n        }\n      }, \"Qty\"))), this.state.dishes.map(dish => /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(ReactTooltip, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 17\n        }\n      }), /*#__PURE__*/React.createElement(Form, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 21\n        }\n      }, dish.dishname), /*#__PURE__*/React.createElement(Col, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 21\n        }\n      }, \"$\", dish.quantityprice), /*#__PURE__*/React.createElement(Col, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        type: \"submit\",\n        onClick: e => {\n          this.addquantityfn(e, dish._id);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 21\n        }\n      }, \"+\"), \"\\xA0 \\xA0\", dish.quantity, \"\\xA0 \\xA0\", /*#__PURE__*/React.createElement(Button, {\n        type: \"submit\",\n        onClick: e => {\n          this.subquantityfn(e, dish._id);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 22\n        }\n      }, \"-\"), \"\\xA0 \\xA0\", /*#__PURE__*/React.createElement(Button, {\n        type: \"submit\",\n        \"data-tip\": \"Remove\",\n        onClick: e => {\n          this.deletequantityfn(e, dish._id);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 22\n        }\n      }, /*#__PURE__*/React.createElement(TiDelete, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 23\n        }\n      }))))))), /*#__PURE__*/React.createElement(Button, {\n        className: \"container1\",\n        onClick: handleSubmit,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 9\n        }\n      }, \"CheckOut\"));\n    } else if (this.state.status !== \"datapresent\" || this.state.status === \"empty\") {\n      beforecart = /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 10\n        }\n      }, \"Your Cart is Empty.Add items!\"));\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Modal, {\n      size: \"md-down\",\n      \"aria-labelledby\": \"contained-modal-title-vcenter\",\n      centered: true,\n      show: viewCart,\n      onHide: closeModal,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Modal.Header, {\n      closeButton: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 14\n      }\n    }, \"Your Cart\"), /*#__PURE__*/React.createElement(Modal.Body, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 14\n      }\n    }, aftercart, beforecart), /*#__PURE__*/React.createElement(Modal.Footer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 14\n      }\n    })));\n  }\n\n}\n\nexport default AddToCart;","map":{"version":3,"sources":["/Users/anaghasethuraman/Desktop/CMPE273-UberEats-Lab3/Frontend/src/components/Dashboard/AddToCart.js"],"names":["Button","React","Component","Modal","Form","Row","Col","axios","backendServer","TiDelete","ReactTooltip","AddToCart","constructor","props","handleChange","e","dishid","dishprice","preventDefault","dishes","state","index","findIndex","dish","_id","orders","quantity","target","value","quantityprice","toFixed","setState","updatestatusfn","quantitydata","updateDishQuantity","addquantityfn","amount","parseFloat","subquantityfn","deletequantityfn","console","log","splice","length","status","post","then","res","show","customerid","localStorage","getItem","restaurantid","dishname","componentDidMount","data","response","setItem","deliverytype","concat","render","viewCart","closeModal","handleSubmit","aftercart","beforecart","updateitems","map"],"mappings":"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","sourcesContent":["\nimport Button from '@restart/ui/esm/Button';\nimport React, {Component} from 'react'\nimport {Modal,Form,Row,Col} from 'react-bootstrap';\nimport axios from 'axios';\nimport backendServer from \"../../webConfig\";\nimport {TiDelete} from 'react-icons/ti';\nimport ReactTooltip from 'react-tooltip';\nclass AddToCart extends Component {\n  \n  constructor(props) {\n    super(props);\n    \n     this.state = {\n      \n      show: false,\n      customerid: localStorage.getItem(\"userid\"),\n      restaurantid : localStorage.getItem(\"restid\"),\n      dishes : [],\n      dishprice : null,\n      dishname:null,\n      status :null,\n  \n    }\n     //this.handleCheckout = this.handleCheckout.bind(this);\n  }\n  componentDidMount(){\n    this.setState({show:!this.state.show})  \n    this.setState({\n          dishes : [] \n      });\n      const data = {\n            customerid:this.state.customerid,\n            //restaurantid: this.state.restaurantid\n          };\n          // console.log(\"***\")\n          // console.log(data)\n          // console.log(\"***\")\n          axios.post(`${backendServer}/getcartitem`,data)\n                  .then((response) => { \n                    //console.log(response.data[0].deliverytype);\n                    localStorage.setItem(\"deliverytype\",response.data[0].deliverytype)\n                   if(response.data.length > 0){\n                     this.setState({ status : \"datapresent\"});\n                   }\n                   else {\n                     this.setState({ status : \"nodata\"});\n                   }\n                  this.setState({\n                    dishes : this.state.dishes.concat(response.data) \n                  });\n                  });\n                  \n  }\n\n  \n  handleChange = (e, dishid,dishprice) => {\n    e.preventDefault();\n    const { dishes } = this.state;\n    const index = dishes.findIndex((dish) => dish._id === dishid);\n    const orders = [...dishes];\n    orders[index].quantity = e.target.value;\n    orders[index].quantityprice = (dishprice * (e.target.value)).toFixed(2) ;\n    this.setState({ dishes : orders });\n  }\n\n  updatestatusfn = (e,dishid,quantity,dishprice) =>{\n    e.preventDefault();\n    const quantitydata = {\n      _id : dishid,\n      quantity : quantity,\n      quantityprice : (quantity * dishprice).toFixed(2)\n    }\n  \n   this.updateDishQuantity(quantitydata);\n    \n  }\n  addquantityfn = (e,dishid) =>{\n    e.preventDefault();\n    const { dishes } = this.state;\n    const index = dishes.findIndex((dish) => dish._id === dishid);\n    const orders = [...dishes];\n    const {quantity} = orders[index]\n    const {dishprice} = orders[index]\n    const amount = parseFloat(dishprice, 10);\n    orders[index].quantity = quantity + 1;\n    orders[index].quantityprice = (amount * (quantity+1)).toFixed(2) ;\n    this.setState({ dishes : orders });\n    const quantitydata = {\n      _id : dishid,\n      quantity : orders[index].quantity,\n      quantityprice : orders[index].quantityprice\n    }\n  \n   this.updateDishQuantity(quantitydata);\n  }\n  subquantityfn = (e,dishid) =>{\n    e.preventDefault();\n    const { dishes } = this.state;\n    const index = dishes.findIndex((dish) => dish._id === dishid);\n    const orders = [...dishes];\n    const {quantity} = orders[index]\n    const {dishprice} = orders[index]\n    const amount = parseFloat(dishprice, 10);\n    if(orders[index].quantity > 1) {\n      orders[index].quantity = quantity - 1;\n      orders[index].quantityprice = (amount * (quantity-1)).toFixed(2) ;\n    }\n    this.setState({ dishes : orders });\n    const quantitydata = {\n      _id : dishid,\n      quantity : orders[index].quantity,\n      quantityprice : orders[index].quantityprice\n    }\n  \n   this.updateDishQuantity(quantitydata);\n  }\n  deletequantityfn = (e,dishid) =>{\n    e.preventDefault();\n    const { dishes } = this.state;\n    const index = dishes.findIndex((dish) => dish._id === dishid);\n    const orders = [...dishes];\n    console.log(orders.splice(index,1))\n    if(orders.length === 0){\n      this.setState({ status : \"empty\"});\n    }\n    // \n    this.setState({ dishes : orders });\n    \n    const quantitydata = {\n      _id : dishid,\n      quantity : 0,\n      quantityprice : 0\n    }\n  \n   this.updateDishQuantity(quantitydata);\n  }\n  updateDishQuantity = (quantitydata)=>{\n\n    console.log(quantitydata)\n    //axios.defaults.headers.common[\"authorization\"] = localStorage.getItem(\n    //  \"token\");\n     axios.post(`${backendServer}/updatedishquantity`, quantitydata)\n             .then(res => {\n                 console.log(\"Order type updated\")\n             })\n             \n  }\n  render(){\n    const { viewCart, closeModal, handleSubmit } = this.props;\n    var aftercart = null;\n    var beforecart = null;\n    let updateitems = null;\n    if(this.state.status === \"datapresent\"){\n     \n       aftercart = ( \n        <div>\n\n                <Form>\n                  <Row>\n                   \n                    <Col className=\"carttable\">\n                    Item \n                    </Col>\n                    <Col className=\"carttable\">\n                    Price\n                    </Col>\n                    <Col className=\"carttable\">\n                    Qty\n                    </Col>\n                  </Row>\n                </Form>\n            {this.state.dishes.map((dish) => (\n              <div>\n                <ReactTooltip />\n\n                <Form>\n                  <Row>\n                    <Col>\n                    {dish.dishname}\n                    </Col>\n                    <Col>\n                    ${dish.quantityprice}\n                    </Col>\n                    <Col>\n                    <Button \n                      type=\"submit\" \n                      onClick={(e) => {\n                        this.addquantityfn(e,dish._id);\n                      }}>\n                      +\n                    </Button> \n                    &nbsp; &nbsp;\n                    {dish.quantity}\n                     &nbsp; &nbsp;\n                     <Button \n                      type=\"submit\" \n                      onClick={(e) => {\n                        this.subquantityfn(e,dish._id);\n                      }}>\n                      -\n                    </Button> \n                    &nbsp; &nbsp;\n                     <Button \n                      type=\"submit\" data-tip=\"Remove\"\n                      onClick={(e) => {\n                        this.deletequantityfn(e,dish._id);\n                      }}>\n                      <TiDelete/>\n                    </Button> \n                    </Col>\n                  </Row>\n                </Form>\n                \n              </div>\n            )\n            )}\n        <Button className=\"container1\"  onClick={handleSubmit}>CheckOut</Button>\n        </div>\n      );\n    }else if(this.state.status !== \"datapresent\" || this.state.status === \"empty\"){\n      beforecart = (\n        <div>\n         <p>Your Cart is Empty.Add items!</p>\n        </div>\n      );\n      \n    }\n   \n \n    \n    \n    \n    return(\n      <div>\n          <Modal size=\"md-down\"\n          aria-labelledby=\"contained-modal-title-vcenter\"\n          centered\n           show={viewCart} onHide={closeModal}>\n             <Modal.Header closeButton>Your Cart</Modal.Header>\n             <Modal.Body>\n              {aftercart}\n              {beforecart}\n             </Modal.Body>\n             <Modal.Footer>\n              \n             </Modal.Footer>\n           </Modal>\n      </div>\n    )\n  }\n}\n  \n  \n\nexport default AddToCart\n"]},"metadata":{},"sourceType":"module"}