{"ast":null,"code":"var _jsxFileName = \"/Users/anaghasethuraman/Desktop/CMPE273-UberEats-Lab3/Frontend/src/components/Login/Login.js\";\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport { Redirect } from 'react-router';\nimport axios from 'axios';\nimport cookie from 'react-cookies';\nimport { Input } from 'reactstrap';\nimport { Button } from 'react-bootstrap';\nimport backendServer from \"../../webConfig\";\nimport validator from 'validator';\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport jwt_decode from \"jwt-decode\";\nimport { userLogin, restaurantLogin } from \"../../actions/loginActions\";\n\nclass Login extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChange = e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.handleSubmit = e => {\n      e.preventDefault(); // if (this.validateLogin() === true) {\n\n      const credential = {\n        email: this.state.email,\n        password: this.state.password,\n        usertype: this.state.usertype\n      };\n\n      if (credential.usertype === 'customer') {\n        // console.log(\"customer\")\n        this.props.userLogin(credential);\n      } else if (credential.usertype === 'restaurant') {\n        this.props.restaurantLogin(credential);\n      } else {\n        alert(\"Provide valid user type\");\n      } // }\n\n    };\n\n    this.register = e => {\n      e.preventDefault(); //this.props.login.message = null;\n\n      const {\n        history\n      } = this.props;\n      history.push('/register');\n    };\n\n    this.state = {\n      message: null\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  componentWillMount() {} // componentWillReceiveProps(nextProps) {\n  //     if (nextProps.login) {\n  //       var { login } = nextProps;\n  //       var loginData = {\n  //         token: login.token || this.state.token,\n  //       };\n  //       this.setState(loginData);\n  //     }\n  //     console.log(loginData);\n  //   }\n\n\n  render() {\n    let redirectVar = null;\n    let redirectHome = null;\n    let message = \"\";\n\n    if (cookie.load('cookie')) {\n      redirectHome = /*#__PURE__*/React.createElement(Redirect, {\n        to: \"/\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 28\n        }\n      });\n    }\n\n    console.log(this.props.login);\n\n    if (this.props.login) {\n      console.log(\"here\");\n      console.log(this.props.login.message);\n\n      if (this.props.login.message === \"Customer Found\") {\n        redirectHome = /*#__PURE__*/React.createElement(Redirect, {\n          to: \"/CustomerHome\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 32\n          }\n        });\n        localStorage.setItem(\"userid\", this.props.login.result._id);\n        localStorage.setItem(\"username\", this.props.login.result.username);\n        localStorage.setItem(\"city\", this.props.login.result.city);\n        this.props.login.message = null;\n        message = null;\n      } else if (this.props.login.message === \"Restaurant Found\") {\n        redirectHome = /*#__PURE__*/React.createElement(Redirect, {\n          to: \"/RestaurantHome\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 32\n          }\n        });\n        localStorage.setItem(\"restaurantid\", this.props.login.result._id);\n        localStorage.setItem(\"restaurantname\", this.props.login.result.restaurantname);\n        localStorage.setItem(\"email\", this.props.login.result.email);\n        localStorage.setItem(\"city\", this.props.login.result.city);\n        this.props.login.message = null;\n        message = null;\n      } // if(this.props.login.message === \"Invalid credentials\" ||this.props.login.message === \"Invalid User\" ){\n      //     message = this.props.login.message;\n      // }\n      else if (this.props.login.message === \"Invalid credentials\" || this.props.login.message === \"Invalid User\") {\n        message = this.props.login.message;\n        this.props.login.message = null;\n      } else {\n        message = \"\";\n        redirectHome = /*#__PURE__*/React.createElement(Redirect, {\n          to: \"/Login\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 36\n          }\n        });\n      }\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"body-login\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 13\n      }\n    }, redirectHome, redirectVar, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"login-form\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"main-div\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"panel\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 17\n      }\n    }, \"Welcome to Uber Eats.\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 17\n      }\n    }, \"Please enter your email and password.\")), /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 13\n      }\n    }, \"Email :\", /*#__PURE__*/React.createElement(\"input\", {\n      type: \"email\",\n      className: \"form-control\",\n      name: \"email\",\n      onChange: this.handleChange,\n      placeholder: \"Email Id\",\n      pattern: \"^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\\\.[a-z0-9!#$'%&*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])$\",\n      title: \"Please enter valid email address\",\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 13\n      }\n    }), \"Password :\", /*#__PURE__*/React.createElement(\"input\", {\n      type: \"password\",\n      className: \"form-control\",\n      name: \"password\",\n      onChange: this.handleChange,\n      placeholder: \"Password\",\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      className: \"usertype\",\n      name: \"usertype\",\n      value: this.state.value,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 25\n      }\n    }, \"User type\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"customer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 25\n      }\n    }, \"Customer\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"restaurant\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 25\n      }\n    }, \"Restaurant\"))), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn btn-primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 15\n      }\n    }, \"Login\"), /*#__PURE__*/React.createElement(\"h4\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 15\n      }\n    }, \"New to Uber Eats?\", /*#__PURE__*/React.createElement(Button, {\n      variant: \"link\",\n      onClick: this.register,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 36\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 84\n      }\n    }, \"Create an account\"))), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        color: \"#ff0000\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 48\n      }\n    }, message))))))) // </Col>\n    // </Row>\n    // </Container>\n    ;\n  }\n\n}\n\nLogin.propTypes = {\n  userLogin: PropTypes.func.isRequired,\n  restaurantLogin: PropTypes.func.isRequired,\n  login: PropTypes.object.isRequired\n};\n\nconst mapStateToProps = state => {\n  return {\n    login: state.login.login\n  };\n};\n\nexport default connect(mapStateToProps, {\n  userLogin,\n  restaurantLogin\n})(Login);","map":{"version":3,"sources":["/Users/anaghasethuraman/Desktop/CMPE273-UberEats-Lab3/Frontend/src/components/Login/Login.js"],"names":["React","Component","Link","Redirect","axios","cookie","Input","Button","backendServer","validator","PropTypes","connect","jwt_decode","userLogin","restaurantLogin","Login","constructor","props","handleChange","e","setState","target","name","value","handleSubmit","preventDefault","credential","email","state","password","usertype","alert","register","history","push","message","bind","componentWillMount","render","redirectVar","redirectHome","load","console","log","login","localStorage","setItem","result","_id","username","city","restaurantname","color","propTypes","func","isRequired","object","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport { Redirect } from 'react-router';\nimport axios from 'axios';\nimport cookie from 'react-cookies';\nimport {Input} from 'reactstrap';\nimport { Button } from 'react-bootstrap';\nimport backendServer from \"../../webConfig\";\nimport validator from 'validator';\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport jwt_decode from \"jwt-decode\";\nimport { userLogin,restaurantLogin} from \"../../actions/loginActions\";\nclass Login extends Component {\n \n    constructor(props) {\n        super(props);\n        this.state= {\n            message : null\n        };\n        \n        this.handleChange = this.handleChange.bind(this);\n        this.handleSubmit = this.handleSubmit.bind(this);\n    }\n\n    componentWillMount() {\n    \n    }\n    // componentWillReceiveProps(nextProps) {\n    //     if (nextProps.login) {\n    //       var { login } = nextProps;\n    \n    //       var loginData = {\n    //         token: login.token || this.state.token,\n    //       };\n    \n    //       this.setState(loginData);\n    //     }\n    //     console.log(loginData);\n    //   }\n\n    handleChange = (e) => {\n        this.setState({ [e.target.name]: e.target.value });\n    }\n\n  \n  \n    handleSubmit = (e) => {\n        e.preventDefault();\n        // if (this.validateLogin() === true) {\n        const credential = {\n            email: this.state.email,\n            password: this.state.password,\n            usertype:this.state.usertype\n        }\n        \n        if(credential.usertype === 'customer'){\n            // console.log(\"customer\")\n            this.props.userLogin(credential);\n        }else if(credential.usertype === 'restaurant'){\n            this.props.restaurantLogin(credential);\n            \n        }else{\n            alert(\"Provide valid user type\");\n        }\n       // }\n        \n    }\n    register = (e) => {\n        e.preventDefault();\n        //this.props.login.message = null;\n        const {history} = this.props;\n        history.push('/register'); \n    }\n    render() {\n        \n        let redirectVar = null;\n        let redirectHome = null;\n        let message = \"\"\n        if (cookie.load('cookie')) { \n            redirectHome = <Redirect to=\"/\" />\n           \n        }\n        console.log(this.props.login)\n\n       \n    \n        if(this.props.login ){\n            console.log(\"here\")\n            console.log(this.props.login.message)\n            if(this.props.login.message === \"Customer Found\"){\n                redirectHome = <Redirect to=\"/CustomerHome\" />\n                localStorage.setItem(\"userid\",this.props.login.result._id)\n                localStorage.setItem(\"username\",this.props.login.result.username)\n                localStorage.setItem(\"city\",this.props.login.result.city)\n                this.props.login.message = null;\n                message = null;\n            }else if(this.props.login.message === \"Restaurant Found\"){\n                redirectHome = <Redirect to=\"/RestaurantHome\" />\n                localStorage.setItem(\"restaurantid\",this.props.login.result._id)\n                localStorage.setItem(\"restaurantname\",this.props.login.result.restaurantname)\n                localStorage.setItem(\"email\",this.props.login.result.email)\n                localStorage.setItem(\"city\",this.props.login.result.city)\n                this.props.login.message = null;\n                message = null;\n            }\n            // if(this.props.login.message === \"Invalid credentials\" ||this.props.login.message === \"Invalid User\" ){\n            //     message = this.props.login.message;\n            // }\n        \n            else if(this.props.login.message === \"Invalid credentials\" ||this.props.login.message === \"Invalid User\" ){\n                message = this.props.login.message;\n                this.props.login.message = null;\n            }\n        \n            else{\n                    message = \"\";\n                    redirectHome = <Redirect to=\"/Login\" />\n                }\n    }\n\n        return (\n            \n            \n            <div className =\"body-login\">{redirectHome}\n                {redirectVar}\n\n            <div className=\"container\">\n            <div className=\"login-form\">\n            <div className=\"main-div\">\n            <div className=\"panel\">\n                <h1>Welcome to Uber Eats.</h1>\n                <p>Please enter your email and password.</p>\n            </div >\n            <form onSubmit={this.handleSubmit}>\n              Email :\n            <input\n                type=\"email\"\n                className=\"form-control\"\n                name=\"email\"\n                onChange={this.handleChange}\n                placeholder=\"Email Id\"\n                pattern=\"^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$'%&*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])$\"\n                title=\"Please enter valid email address\"\n                required\n              />\n              Password : \n              <input\n                type=\"password\"\n                className=\"form-control\"\n                name=\"password\"\n                onChange={this.handleChange}\n                placeholder=\"Password\"\n                required\n              />\n            <div className=\"form-group\">\n              <select className=\"usertype\" name=\"usertype\" value={this.state.value} onChange={this.handleChange}>\n                        <option value=\"\">User type</option>\n                        <option value=\"customer\">Customer</option>\n                        <option value=\"restaurant\">Restaurant</option>\n                    </select>\n                  </div> \n             \n              <br />\n              <button type=\"submit\" className=\"btn btn-primary\">\n              Login\n              </button>\n              <h4>New to Uber Eats?<Button  variant=\"link\" onClick={this.register}><h4>Create an account</h4></Button></h4>\n              <div  style={{color: \"#ff0000\"}}><h4>{message}</h4></div> \n              </form>\n            </div>\n          </div>\n        </div>\n        </div>\n        \n        // </Col>\n        // </Row>\n        // </Container>\n        )\n    }\n}\n\nLogin.propTypes = {\n    userLogin: PropTypes.func.isRequired,\n    restaurantLogin: PropTypes.func.isRequired,\n    login: PropTypes.object.isRequired,\n  };\n  \n  const mapStateToProps = (state) => {\n    return {\n      login: state.login.login,\n    };\n  };\n  export default connect(mapStateToProps, {userLogin,restaurantLogin})(Login);"]},"metadata":{},"sourceType":"module"}